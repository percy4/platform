version: 1
workflow:
  name: 情绪实验流程
  description: ""
  nodes:
    # - name: 分类数据加载
    #   kind: normal
    #   display_name: 分类训练测试数据
    #   description: 分类/sample/load_data bci_classification_load_sample_data_v1.0.0
    #   envs:
    #     INPUT_MAT_PATH: /Users/ghostw/Downloads/sample-module-svm-lr-mlp-rnn/Dataset-small/training/NeuralData1.mat
    #     INPUT_LABEL_TXT_PATH: /Users/ghostw/Downloads/sample-module-svm-lr-mlp-rnn/Dataset-small/training/label1.txt
    #   module: bci_classification_load_sample_data
    #   accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
    #   outputs:
    #     "0":
    #       - 分类训练:0
    #       - 分类预测:1
    #     "1":
    #       - 分类训练:1
    # - name: 分类训练
    #   kind: normal
    #   display_name: SVM分类器训练模块
    #   description: 分类/SVM/训练 bci_classification_svm_fit_v1.0.0
    #   envs:
    #     INPUT_PARAM_C: "8"
    #     INPUT_PARAM_DECISION_FUNCTION_SHAPE: ovo
    #   module: bci_classification_svm_fit
    #   accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
    #   outputs:
    #     "0":
    #       - 分类预测:0
    # - name: 分类预测
    #   kind: normal
    #   display_name: SVM分类器预测模块
    #   description: 分类/SVM/测试 bci_classification_svm_predict_v1.0.0
    #   envs: { }
    #   module: bci_classification_svm_predict
    #   accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
    - name: 数据加载
      kind: normal
      display_name: 数据加载
      description:
      envs:
        PARAM_LOAD_PATH: "/Users/ghostw/Code/dcp-dag-export-demo/demo_emotion/emotion/processed_data/"
        PARAM_NUM_SUBS: "5"
        PARAM_NUM_TRIALS: "28"
        PARAM_NUM_CHANNELS: "32"
        PARAM_NUM_TIMEPOINTS: "7500"
      module: bci_emotion_load_data
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
      outputs:
        "0":
          - 数据切片:0
    - name: 数据切片
      kind: normal
      display_name: 数据切片
      description:
      envs:
        PARAM_WINDOW: "250"
        PARAM_STEP: "250"
      module: bci_emotion_slice_data
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
      outputs:
        "0":
          - 生成标签:0
          - 划分数据集:0
    - name: 生成标签
      kind: normal
      display_name: 生成标签
      description:
      envs: { }
      module: bci_emotion_generate_labels
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
      outputs:
        "0":
          - 划分数据集:1
    - name: 划分数据集
      kind: normal
      display_name: 划分数据集
      description:
      envs: { }
      module: bci_emotion_split_data
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
      outputs:
        "0":
          - 训练SVM模型:0
        "1":
          - 训练SVM模型:1
        "2":
          - SVM预测:1
        "3":
          - 计算准确率:0
          - 计算F1分数:0


    ### 需要被替换的模块
    - name: 训练SVM模型
      kind: normal
      display_name: 训练SVM模型
      description:
      envs:
        PARAM_SVC_KERNEL: "linear"
      module: bci_emotion_svm_fit
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
      outputs:
        "0":
          - SVM预测:0
    - name: SVM预测
      kind: normal
      display_name: SVM预测
      description:
      envs: { }
      module: bci_emotion_svm_pred
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。
      outputs:
        "0":
          - 计算准确率:1
          - 计算F1分数:1



    # ###
    - name: 计算准确率
      kind: normal
      display_name: 计算准确率
      description:
      envs: { }
      module: bci_emotion_accuracy_score
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。

    - name: 计算F1分数
      kind: normal
      display_name: 计算F1分数
      description:
      envs:
        PARAM_AVERAGE: 'macro'
      module: bci_emotion_f1_score
      accepted_into_platform: true # 新增模块默认为真，计算平台将接收并导入。范例模块默认为假，不建议修改配置或源码，如需修改请说明原因。

